{% assign day_rows = site.data.schedule | where: "Day", include.day %}
{% assign rooms = day_rows | map: "Room" | uniq | sort %}
{% assign times = day_rows | map: "Time" | uniq | sort %}

<table class="schedule-table">
  <thead>
    <tr>
      <th>Time</th>
      {% for room in rooms %}
        <th>{{ room }}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for time in times %}
      <tr>
        <td>{{ time }}</td>
        {% for room in rooms %}
          {% assign cell_classes = day_rows | where: "Time", time | where: "Room", room %}
          {% if cell_classes.size > 0 %}
            {% assign entry = cell_classes.first %}
            {% assign level_class = entry.Level | downcase | replace: " ", "-" %}
            <td class="level-{{ level_class }}">
              <strong>{{ entry.Code }}</strong><br>
              {{ entry.Courses }}<br>
              Sec {{ entry.Section }} â€“ Level {{ entry.Level }}<br>
              {{ entry.Instructor }}
            </td>
          {% else %}
            <td></td>
          {% endif %}
        {% endfor %}
      </tr>
    {% endfor %}
  </tbody>
</table>